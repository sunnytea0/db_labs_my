# Модель прецедентів

## Загальна схема

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    actor Expert
    actor Client

    usecase "UserManageAccount\nВзаємодія з\nобліковим записом" as UInteraction
    usecase "SurveyInteraction\nВзаємодія з опитуванням" as EInteraction
    usecase "SurveyCreate\nСтворити\nопитування" as SCreate
    usecase "SurveyDelete\nВидалити\nопитування" as SDelete
    usecase "SurveyManageResults\nВзаємодія\nз результатами" as SResults
    usecase "SurveyShareAccess\nПоділитись\nопитуванням" as SShare
    usecase "SurveyUpdate\nОновлення опитування" as SUpdate

    Expert -d-|> Client
    Expert -> EInteraction
    Client -u-> SResults
    Client -r-> SCreate
    Client -d-> UInteraction
    Client -d-> SDelete
    Client -d-> SUpdate
    Client -l-> SShare

@enduml

</center>

## Схема клієнта

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    actor Client
    usecase "UserManageAccount\nВзаємодія з\nобліковим записом" as UInteraction
    usecase "UserRegistration\nРеєстрація" as URegister
    usecase "UserLogin\nВхід у систему" as ULogin
    usecase "SurveyManageResults\nВзаємодія\nз результатами" as SResults
    usecase "SurveyResultsView\nПерегляд відповідей" as SView
    usecase "SurveyResultsExport\nЕкспорт результатів" as SExport
    usecase "SurveyCreate\nСтворення опитування" as SCreate
    usecase "SurveyUpdate\nОновлення опитування" as SUpdate
    usecase "SurveyDelete\nВидалення опитування" as SDelete
    usecase "SurveyReminder\nНагадування" as SReminder
    usecase "SurveyShareAccess\nПоділитись опитуванням" as SShare
    SResults ..> SView
    SResults ..> SExport
    UInteraction ..> URegister
    UInteraction ..> ULogin
    Client -[hidden]-> UInteraction
    Client -[hidden]-> SResults
    Client -u-> UInteraction
    Client -d-> SResults
    Client -l-> SCreate
    Client -u-> SUpdate
    Client -u-> SDelete
    Client -d-> SReminder
    Client -r-> SShare

@enduml

</center>

## Схема експерта

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;">

@startuml

    actor "Експерт" as Expert #f0c5c2

    usecase "SurveyInteraction\nВзаємодія з опитуванням" as SurveyInteraction
    usecase "UserCompletesSurvey\nЗаповнення опитування" as TakeSurvey
    usecase "UserEditResponses\nРедагування відповідей" as ChangeAnswers
    usecase "SurveyFeedback\nСтворення нового опитування" as SurveyFeedback

    Expert --> SurveyInteraction
    SurveyInteraction .d.> TakeSurvey : extends
    SurveyInteraction .d.> ChangeAnswers : extends
    SurveyInteraction .l.> SurveyFeedback : extends

@enduml

</center>

## Сценарії використання

### UserRegistration

| ID                     |                                                                                                                                                 UserRegistration                                                                                                                                                 |
| :--------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| **Назва:**             |                                                                                                                                          Реєстрація нового користувача                                                                                                                                           |
| **Учасники:**          |                                                                                                                                               Користувач, система                                                                                                                                                |
| **Передумови:**        |                                                                                                                                  Користувач не має облікового запису в системі                                                                                                                                   |
| **Результат:**         |                                                                                                                  Система створює новий обліковий запис і зберігає реєстраційні дані користувача                                                                                                                  |
| **Виключні ситуації:** |                                                                                                  Введено некоректні дані – InvalidDataException <br> Користувач уже зареєстрований – AlreadyRegisteredException                                                                                                  |
| **Основний сценарій:** | 1. Користувач відкриває сторінку реєстрації <br> 2. Вносить необхідні дані <br> 3. Система перевіряє введену інформацію (можливі помилки InvalidDataException або AlreadyRegisteredException) <br> 4. Якщо все вірно, створюється обліковий запис <br> 5. Користувач отримує повідомлення про успішну реєстрацію |

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;">

@startuml

    skinparam ActivityBackgroundColor #d1a6e2

    |Користувач|
    start;
    :відкриває сторінку реєстрації;
    :вносить необхідні дані;

    |Система|
    :перевіряє введену інформацію;
    note right #D10000
    <b>Possible error:

    - InvalidDataException
    - AlreadyRegisteredException
    end note

    :створює обліковий запис;
    :зберігає реєстраційні дані користувача;

    |Користувач|
    :отримує повідомлення про успішну реєстрацію;

    stop;

@enduml

</center>

### UserLogin

| ID                     |                                                                                                                  UserLogin                                                                                                                  |
| :--------------------- | :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| **Назва:**             |                                                                                                               Вхід у систему                                                                                                                |
| **Учасники:**          |                                                                                                             Користувач, система                                                                                                             |
| **Передумови:**        |                                                                                                     Користувач уже має обліковий запис                                                                                                      |
| **Результат:**         |                                                                                                    Користувач успішно входить до системи                                                                                                    |
| **Виключні ситуації:** |                                                                                               Введено некоректні дані – InvalidDataException                                                                                                |
| **Основний сценарій:** | 1. Користувач відкриває сторінку авторизації <br> 2. Вносить логін та пароль <br> 3. Система перевіряє правильність введених даних (можлива помилка InvalidDataException) <br> 4. Якщо дані коректні, надається доступ до облікового запису |

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;">

@startuml

    skinparam ActivityBackgroundColor #d1a6e2

    |Користувач|
    start;
    :відкриває сторінку авторизації;
    :вносить логін та пароль;

    |Система|
    :перевіряє правильність введених даних;
    note right #D10000
    <b>Possible error:

    - InvalidDataException
    end note

    :надає доступ до облікового запису;

    |Користувач|
    :успішно входить до системи;

    stop;

@enduml

</center>

### SurveyCreate

| ID                     |                                                                                                     SurveyCreate                                                                                                      |
| :--------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| **Назва:**             |                                                                                              Створення нового опитування                                                                                              |
| **Учасники:**          |                                                                                                  Користувач, система                                                                                                  |
| **Передумови:**        |                                                                      1. Користувач має обліковий запис <br> 2. Має права на створення опитування                                                                      |
| **Результат:**         |                                                                                       Опитування успішно збережено в базі даних                                                                                       |
| **Виключні ситуації:** |                                                                             Опитування не містить жодного питання – EmptySurveyException                                                                              |
| **Основний сценарій:** | 1. Користувач відкриває інтерфейс створення опитування <br> 2. Заповнює необхідні поля <br> 3. Відправляє запит на збереження (можлива помилка EmptySurveyException) <br> 4. Система зберігає опитування в базі даних |

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

        skinparam ActivityBackgroundColor #d1a6e2

        |Користувач|
        start;
        :відкриває інтерфейс створення опитування;
        :заповнює необхідні поля;
        :відправляє запит на збереження;
        note right #D10000
        <b>Possible error:
        - EmptySurveyException
        end note

        |Система|
        :зберігає опитування в базі даних;

        |Користувач|
        stop;

@enduml

</center>

### UserCompletesSurvey

| ID                     |                                                                                                                         UserCompletesSurvey                                                                                                                         |
| :--------------------- | :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| **Назва:**             |                                                                                                                        Заповнення опитування                                                                                                                        |
| **Учасники:**          |                                                                                                                         Користувач, система                                                                                                                         |
| **Передумови:**        |                                                                                                                 Користувач має доступ до опитування                                                                                                                 |
| **Результат:**         |                                                                                                                   Відповіді користувача збережені                                                                                                                   |
| **Виключні ситуації:** |                                                                                                      Пропущені обов’язкові питання - IncompleteSurveyException                                                                                                   |
| **Основний сценарій:** | 1. Користувач відкриває опитування <br> 2. Система формує анкету <br> 3. Користувач відповідає на запитання анкети <br> 4. Користувач завершує проходження опитування <br> 5. Система перевіряє коректність заповнення анкети (може виникнути помилка IncompleteSurveyException) <br> 6. Система зберігає відповіді користувача <br> 7. Система інформує користувача про успішне завершення опитування |

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    skinparam ActivityBackgroundColor #d1a6e2

    |Користувач|
    start;
    :користувач відкриває\nопитування;

    |Система|
    :формує анкету;

    |Користувач|
    :відповідає на\nзапитання анкети;
    :завершує проходження\nопитування;

    |Система|
    :перевіряє\nкоректність заповнення\nанкети;
    note right #D10000
    <b>Possible error:
    - IncompleteSurveyException
    end note

    :зберігає відповіді\nкористувача;
    :інформує користувача\nпро успішне завершення\nопитування;

    |Користувач|
    stop;

@enduml

</center>

### UserEditResponses

| ID                     |                                                                                                                                        UserEditResponses                                                                                                                                         |
| :--------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| **Назва:**             |                                                                                                                                      Редагування відповідей                                                                                                                                      |
| **Учасники:**          |                                                                                                                                       Користувач, система                                                                                                                                        |
| **Передумови:**        |                                                                                                                               Користувач раніше пройшов опитування                                                                                                                               |
| **Результат:**         |                                                                                                                                Відредаговані відповіді збережені                                                                                                                                 |
| **Виключні ситуації:** |                                                                                      Деякі питання заповнені некоректно - InvalidResponseException <br> Опитування закрите для змін - SurveyClosedException                                                                                      |
| **Основний сценарій:** | 1. Користувач обирає опитування для редагування <br> 2. Вносить зміни у відповіді <br> 3. Система перевіряє коректність даних (може виникнути InvalidResponseException) <br> 4. Система обробляє зміни (може виникнути SurveyClosedException) <br> 5. Відредаговані відповіді оновлюються у базі |

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    skinparam ActivityBackgroundColor #d1a6e2

    |Користувач|
    start;
    :користувач обирає опитування для редагування;
    :вносить зміни у відповіді;

    |Система|
    :система перевіряє коректність даних;
    note right #D10000
    <b>Possible error:
    - InvalidResponseException
    end note
    :система обробляє зміни;
    note right #D10000
    <b>Possible error:
    -  SurveyClosedException
    end note
    :відредаговані відповіді оновлюються у базі;

    stop;

@enduml

</center>

### SurveyResultsView

| ID                     |                                                                                                                SurveyResultsView                                                                                                                 |
| :--------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| **Назва:**             |                                                                                                        Перегляд відповідей на опитування                                                                                                         |
| **Учасники:**          |                                                                                                               Користувач, система                                                                                                                |
| **Передумови:**        |                                                                                           Опитування завершене, отримано достатню кількість відповідей                                                                                           |
| **Результат:**         |                                                                                                   Система генерує звіт із підсумковими даними                                                                                                    |
| **Виключні ситуації:** |                                                                           Відсутність достатньої кількості відповідей або технічні проблеми з відображенням інформації                                                                           |
| **Основний сценарій:** | 1. Система обробляє всі отримані дані <br> 2. Формується звіт із результатами <br> 3. Користувач переглядає звіт або завантажує його у зручному форматі (PDF, надсилання на e-mail) <br> 4. Адміністратор має доступ до звіту в панелі керування |

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    skinparam ActivityBackgroundColor #d1a6e2

    |Система|
    start;
    :система обробляє всі отримані дані ;
    :формується звіт із результатами;

    |Користувач|
    :переглядає звіт або завантажує його у зручному форматі (PDF, надсилання на e-mail);
    :вносить зміни у відповіді;

    |Адміністратор|
    :адміністратор має доступ до звіту в панелі керування;

    stop;

@enduml

</center>

### SurveyResultsExport

| ID                     |                                                                                               SurveyResultsExport                                                                                               |
| :--------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| **Назва:**             |                                                                                         Експорт результатів опитування                                                                                          |
| **Учасники:**          |                                                                                               Користувач, система                                                                                               |
| **Передумови:**        |                                                                                              Опитування завершене                                                                                               |
| **Результат:**         |                                                                                Користувач отримує результати у вибраному форматі                                                                                |
| **Виключні ситуації:** |                                                                            Некоректний формат експорту - UnsupportedFormatException                                                                             |
| **Основний сценарій:** | 1. Користувач обирає опитування <br> 2. Вибирає формат експорту та надсилає запит (може виникнути UnsupportedFormatException) <br> 3. Система генерує файл <br> 4. Користувач отримує файл у потрібному форматі |

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    skinparam ActivityBackgroundColor #d1a6e2

    |Користувач|
    start;
    :обирає опитування;
    :вибирає формат експорту та надсилає запит;
    note right #D10000
    <b>Possible error:
    - UnsupportedFormatException
    end note


    |Система|
    :система генерує файл;

    |Користувач|
    :користувач отримує файл у потрібному форматі;

    stop;

@enduml

</center>

### SurveyUpdate

| ID                     |                                                                                                        SurveyUpdate                                                                                                         |
| :--------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| **Назва:**             |                                                                                                    Оновлення опитування                                                                                                     |
| **Учасники:**          |                                                                                                     Користувач, система                                                                                                     |
| **Передумови:**        |                                                                                          Опитування створене, але ще не завершене                                                                                           |
| **Результат:**         |                                                                                         Система зберігає оновлену версію опитування                                                                                         |
| **Виключні ситуації:** |                                                                                   Опитування вже активне або завершене — зміни неможливі                                                                                    |
| **Основний сценарій:** | 1. Користувач відкриває потрібне опитування для редагування <br> 2. Вносить зміни у формулювання запитань або налаштування <br> 3. Підтверджує оновлення <br> 4. Система зберігає зміни й оновлює поточну версію опитування |

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

skinparam ActivityBackgroundColor #d1a6e2

    |Користувач|
    start;
    :користувач відкриває потрібне опитування для редагування;
    :вносить свої зміни та підтверджує нові зміни;
    note right #D10000
    <b>Possible error:
    - Опитування вже активне або завершене — зміни неможливі
    end note

    |Система|
    :система зберігає зміни й оновлює поточну версію опитування;

    stop;

@enduml

</center>

### SurveyFeedback

| ID                     |                                                                                                SurveyFeedback                                                                                                |
| :--------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| **Назва:**             |                                                                                        Надання відгуку про опитування                                                                                        |
| **Учасники:**          |                                                                                             Користувач, система                                                                                              |
| **Передумови:**        |                                                                   Користувач завершив проходження опитування та має авторизований доступ.                                                                    |
| **Результат:**         |                                                                        Відгук успішно збережений у системі та доступний адміністрації                                                                        |
| **Виключні ситуації:** |                                                                    Відгук не відправлено через технічну помилку або недоступність сервера                                                                    |
| **Основний сценарій:** | 1. Користувач переглядає підсумки опитування <br> 2. Оцінює якість запитань і надає зворотний зв’язок <br> 3. Система зберігає відгук <br> 4. Адміністратор може переглянути отримані відгуки в адмін-панелі |

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    skinparam ActivityBackgroundColor #d1a6e2

    |Користувач|
    start;
    :переглядає підсумки опитування;
    :оцінює якість запитань і надає зворотний зв’язок;

    |Система|
    :система зберігає відгук;
    note right #D10000
    <b>Possible error:
    - Відгук не відправлено через технічну помилку або недоступність сервера
    end note

    :надає посилання користувачу;

    |Адміністратор|
    :адміністратор може переглянути отримані відгуки в адмін-панелі;

    stop;

@enduml

</center>

### SurveyShareAccess

| ID                     |                                                                        SurveyShareAccess                                                                         |
| :--------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| **Назва:**             |                                                                  Надання доступу до опитування                                                                   |
| **Учасники:**          |                                                                       Користувач, система                                                                        |
| **Передумови:**        |                                                                 Користувач є автором опитування                                                                  |
| **Результат:**         |                                                                Інші користувачі отримують доступ                                                                 |
| **Виключні ситуації:** |                                                                              Немає                                                                               |
| **Основний сценарій:** | 1. Користувач обирає опитування для спільного доступу <br> 2. Система генерує унікальне посилання <br> 3. Посилання надається користувачам, які отримують доступ |

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    skinparam ActivityBackgroundColor #d1a6e2

    |Користувач|
    start;
    :змінює формат опитування на формат спільного доступу;
    :копіює посилання;

    |Система|
    :генерує унікальне посилання;
    :надає посилання користувачу;

    |Користувач|
    :отримує доступ до опитування;
    :ділиться посиланням з іншими користувачами;

    |Інші Користувачі|
    :отримують доступ до опитування через посилання;
    stop;

@enduml

</center>

### SurveyReminder

| ID                     |                                                                                              SurveyReminder                                                                                              |
| :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| **Назва:**             |                                                                                  Нагадування про проходження опитування                                                                                  |
| **Учасники:**          |                                                                                           Користувач, система                                                                                            |
| **Передумови:**        |                                                                          Користувач має активне опитування, яке ще не завершив                                                                           |
| **Результат:**         |                                                                   Користувач отримує нагадування про необхідність завершити опитування                                                                   |
| **Виключні ситуації:** |                                                                         Немає незавершених опитувань – NoPendingSurveysException                                                                         |
| **Основний сценарій:** | 1. Користувач заходить у систему та переглядає свої активні опитування <br> 2. Система перевіряє список активних опитувань користувача <br> 3. Якщо є незавершені опитування, то система надсилає нагадування користувачу (може виникнути помилка NoPendingSurveysException) <br> 4. Користувач отримує повідомлення про необхідність завершити опитування |

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    skinparam ActivityBackgroundColor #d1a6e2

    |Користувач|
    start;
    :заходить у систему та переглядає свої активні опитування;

    |Система|
    :перевіряє список активних опитувань користувача;
    :якщо є незавершені опитування, то система надсилає нагадування користувачу;
    note right #D10000
    <b>Possible error:
    - NoPendingSurveysException
    end note

    |Користувач|
    :отримує повідомлення про необхідність завершити опитування;
    stop;

@enduml

</center>

### SurveyDelete

| ID                     |                                                                                                                                          SurveyDelete                                                                                                                                           |
| :--------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| **Назва:**             |                                                                                                                                      Видалення опитування                                                                                                                                       |
| **Учасники:**          |                                                                                                                                       Користувач, система                                                                                                                                       |
| **Передумови:**        |                                                                                                                                  Користувач створив опитування                                                                                                                                  |
| **Результат:**         |                                                                                                                                 Опитування видалене із системи                                                                                                                                  |
| **Виключні ситуації:** |                                                                                       Опитування не знайдено – SurveyNotFoundException <br> У користувача немає прав на видалення – AccessDeniedException                                                                                       |
| **Основний сценарій:** | 1. Користувач обирає опитування для видалення <br> 2. Користувач надсилає запит на видалення <br> 3. Система перевіряє права доступу (може виникнути помилка AccessDeniedException) <br> 4. Система видаляє опитування (може виникнути помилка SurveyNotFoundException) <br> 5. Користувач отримує підтвердження на видалення |

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    skinparam ActivityBackgroundColor #d1a6e2

    |Користувач|
    start;
    :обирає опитування для видалення;
    :надсилає запит на видалення;

    |Система|
    :перевіряє права доступу;
    note right #D10000
    <b>Possible error:
    - AccessDeniedException
    end note

    :видаляє опитування;
    note right #D10000
    <b>Possible error:
    - SurveyNotFoundException
    end note

    |Користувач|
    :отримує підтвердження на видалення;
    stop;

@enduml

</center>

